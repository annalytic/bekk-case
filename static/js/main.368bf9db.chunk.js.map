{"version":3,"sources":["logo.svg","components/Travels/Travels.js","components/Results/Results.js","App.js","index.js"],"names":["Travels","id","handleEdit","useState","km","antall","data","setData","handleChange","e","value","target","name","data-id","className","type","min","placeholder","pattern","onChange","htmlFor","Results","result","resetKey","App","arbeidsreiser","setArbeidsreiser","besoeksreiser","setBesoeksreiser","utgifter","setUtgifter","loading","setLoading","error","setError","setResult","reset","setReset","invalidAntall","setInvalidAntall","handleEditAR","obj","newArbeidsreiser","handleEditBR","newBesoeksreiser","src","logo","alt","onSubmit","preventDefault","filteredArbeidsreiser","filter","Object","values","length","filteredBesoeksreiser","invalidArbeidsreiser","some","every","invalidBesoeksreiser","fetch","method","headers","body","JSON","stringify","then","res","json","reisefradrag","catch","console","map","arbeidsreise","onClick","besoeksreise","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.368bf9db.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.35b85e4b.svg\";","import React, { useState } from 'react';\n\nfunction Travels( { id, handleEdit } ) {\n\t/**\n\t* States\n\t*/\n\tconst [ data, setData ] = useState( { km: '', antall: '' } );\n\n\t/* ------------------------------ */\n\n\t/**\n\t* Functions\n\t*/\n\t/* Handles when user types in input fields. */\n\tconst handleChange = ( e ) => {\n\t\tlet value = e.target.value;\n\t\tlet name = e.target.name;\n\n\t\tsetData( { ...data, [name]: value } );\n\t\thandleEdit( id, { ...data, [name]: value } );\n\t}\n\n\t/* ------------------------------ */\n\n\t/**\n\t* Render\n\t*/\n\treturn (\n\t\t<li data-id={ id }>\n\t\t\t<div className=\"field-group floating-label\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\tname=\"km\"\n\t\t\t\t\tmin=\"0\"\n\t\t\t\t\tplaceholder=\"Km\"\n\t\t\t\t\tpattern=\"[0-9]*\"\n\t\t\t\t\tvalue={ data.km }\n\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t/>\n\t\t\t\t<label htmlFor=\"km\">Km</label>\n\t\t\t</div>\n\n\t\t\t<div className=\"field-group floating-label\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\tname=\"antall\"\n\t\t\t\t\tmin=\"0\"\n\t\t\t\t\tplaceholder=\"Antall\"\n\t\t\t\t\tpattern=\"[0-9]*\"\n\t\t\t\t\tvalue={ data.antall }\n\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t/>\n\t\t\t\t<label htmlFor=\"antall\">Antall</label>\n\t\t\t</div>\n\t\t</li>\n\t);\n}\n\nexport default Travels;\n","function Results( { result } ) {\n\tif ( result === null ) {\n\t\treturn (\n\t\t\t<div className=\"info\">\n\t\t\t\t<h3>Noe gikk galt</h3>\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\treturn (\n\t\t\t<div className=\"info\">\n\t\t\t\t<h3>Ditt reisefradrag:</h3>\n\t\t\t\t<span className=\"number\">{ result } kr</span>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Results;\n","/**\n* External dependencies\n*/\nimport React, { useState } from 'react';\n\n/**\n* Internal dependencies\n*/\nimport logo from './logo.svg';\nimport Travels from './components/Travels/Travels';\nimport Results from './components/Results/Results';\n\nlet resetKey = 0;\n\nfunction App() {\n  /**\n  * States\n  */\n  const [ arbeidsreiser, setArbeidsreiser ] = useState([{ km: '', antall: '' }]);\n  const [ besoeksreiser, setBesoeksreiser ] = useState([{ km: '', antall: '' }]);\n  const [ utgifter, setUtgifter ] = useState('');\n\n  const [ loading, setLoading ] = useState(false);\n  const [ error, setError ] = useState(false);\n  const [ result, setResult ] = useState(false);\n  const [ reset, setReset ] = useState(false);\n  const [ invalidAntall, setInvalidAntall ] = useState(false);\n\n  /* ------------------------------ */\n  /**\n  * Functions\n  */\n  const handleEditAR = ( id, obj ) => {\n    const newArbeidsreiser = [...arbeidsreiser];\n    newArbeidsreiser[id] = obj;\n    setArbeidsreiser(newArbeidsreiser);\n  }\n\n  const handleAddAR = () => {\n    const newArbeidsreiser = [...arbeidsreiser, { km: '', antall: '' }];\n    setArbeidsreiser(newArbeidsreiser);\n  }\n\n  const handleEditBR = ( id, obj ) => {\n    const newBesoeksreiser = [...besoeksreiser];\n    newBesoeksreiser[id] = obj;\n    setBesoeksreiser(newBesoeksreiser);\n  }\n\n  const handleAddBR = () => {\n    const newBesoeksreiser = [...besoeksreiser, { km: '', antall: '' }];\n    setBesoeksreiser(newBesoeksreiser);\n  }\n\n  const handleReset = () => {\n    resetKey+=1;\n    setArbeidsreiser([{ km: '', antall: '' }]);\n    setBesoeksreiser([{ km: '', antall: '' }]);\n    setUtgifter('');\n    setReset(true);\n  }\n\n  const handleSubmit = ( e ) => {\n    e.preventDefault();\n    setReset(false);\n\n    /* Filters out objects with non-empty values. */\n    const filteredArbeidsreiser = arbeidsreiser.filter( obj => {\n      return Object.values(obj).filter( value => ( value === \"\" ) ).length !== 2;\n    } );\n\n    const filteredBesoeksreiser = besoeksreiser.filter( obj => {\n      return Object.values(obj).filter( value => ( value === \"\" ) ).length !== 2;\n    } );\n\n    /* Make sure that if one input field has value, the other one has too. */\n    const invalidArbeidsreiser = filteredArbeidsreiser.some( obj => {\n        return ! Object.values(obj).every( value => value );\n    });\n\n    const invalidBesoeksreiser = filteredBesoeksreiser.some( obj => {\n        return ! Object.values(obj).every( value => value );\n    });\n\n    if ( invalidArbeidsreiser || invalidBesoeksreiser ) {\n      setInvalidAntall(true);\n    } else {\n      setInvalidAntall(false);\n    }\n\n    /* Constructs data to post to API. */\n    const data = {\n      'arbeidsreiser': filteredArbeidsreiser,\n      'besoeksreiser': filteredBesoeksreiser,\n      'utgifterBomFergeEtc': utgifter\n    }\n\n    const url = 'https://9f22opit6e.execute-api.us-east-2.amazonaws.com/default/reisefradrag';\n\n    if ( ! invalidArbeidsreiser && ! invalidBesoeksreiser ) {\n      setLoading( true );\n\n      /* Posts data to API and handles response. */\n      fetch( url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify( data ),\n      } )\n        .then( ( res ) => res.json() )\n        .then( ( res ) => {\n          setLoading( false );\n          setResult( res.reisefradrag );\n        } )\n        .catch( ( error ) => {\n          console.error( 'Error', error );\n          setError( true );\n          setLoading( false );\n        });\n    }\n  }\n\n  /* ------------------------------ */\n\n  /**\n  * Render\n  */\n  return (\n    <div className=\"App\">\n      <header>\n        <img src={logo} className=\"logo\" alt=\"logo\" />\n        <div>\n          <h1>Reiseregning</h1>\n          <p>Beregning av reisefradrag</p>\n        </div>\n      </header>\n\n      <main>\n        { ( ! reset && ! loading && result >= 0 && result !== false ) && (\n          <Results result={ result } />\n        ) }\n\n        { ( ! reset && error ) && (\n          <div className=\"info\">\n            <h3>Noe gikk galt</h3>\n            <p>Prøv igjen senere eller ta kontakt med oss.</p>\n          </div>\n        ) }\n\n        <form onSubmit={ handleSubmit }>\n          <h2>Arbeidsreiser</h2>\n          <ul className=\"reiser arbeidsreiser unstyled-list\">\n            { arbeidsreiser.map( ( arbeidsreise, id ) => {\n              return (\n                <Travels key={ `${resetKey}-${id}` } id={ id } handleEdit={ handleEditAR } />\n              );\n            } )}\n          </ul>\n\n          <button\n            type=\"button\"\n            onClick={ handleAddAR }\n          >\n            Legg til arbeidsreise\n          </button>\n\n          <h2>Besøksreiser</h2>\n          <ul className=\"reiser besoeksreiser unstyled-list\">\n            { besoeksreiser.map( ( besoeksreise, id ) => {\n              return (\n                <Travels key={ `${resetKey}-${id}` } id={ id } handleEdit={ handleEditBR } />\n              );\n            } )}\n          </ul>\n\n          <button\n            type=\"button\"\n            onClick={ handleAddBR }\n          >\n            Legg til besøksreise\n          </button>\n\n          <h2>Utgifter til bom, ferge etc.</h2>\n          <div className=\"field-group floating-label\">\n            <input\n              type=\"number\"\n              name=\"utgifter\"\n              min=\"0\"\n              placeholder=\"Kr\"\n              pattern=\"[0-9]*\"\n              value={ utgifter }\n              onChange={ ( e ) => setUtgifter( e.target.value )}\n            />\n          <label htmlFor=\"utgifter\">Kr</label>\n          </div>\n\n          { ! loading && <input type=\"submit\" value=\"Beregn\" /> }\n\n          { loading && <div className=\"loader\"></div> }\n\n          { ! reset && invalidAntall && <p className=\"error-invalid-antall\">Fyll inn begge felt.</p>}\n\n          <hr />\n\n          <button\n            type=\"button\"\n            onClick={ handleReset }\n            className=\"reset\"\n          >\n            Begynn på nytt\n          </button>\n        </form>\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}